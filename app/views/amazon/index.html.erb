<div class="container">
  <form class="calculate-form">
    <div class="form-group row">
      <label for="amazon-price" class="col-sm-2 col-form-label">Precio en Amazon</label>
      <div class="col-sm-3">
        <input type="text" class="form-control" name="amazon_price" id="amazon-price" placeholder="Precio en Amazon">
      </div>
    </div>
    <div class="form-group row">
      <label for="shipping-price" class="col-sm-2 col-form-label">Precio de envio</label>
      <div class="col-sm-3">
        <input type="text" class="form-control" name="shipping_price" id="shipping-price" placeholder="Precio de envio">
      </div>
    </div>
    <div class="form-group row">
      <label for="weight" class="col-sm-2 col-form-label">Peso</label>
      <div class="col-sm-3">
        <input type="text" class="form-control" name="weight" id="weight" placeholder="Peso">
      </div>
    </div>
    <div class="form-group row">
      <div class="offset-sm-2 col-sm-10">
        <button type="submit" class="btn btn-primary" id="calculate-price-btn">Calcular</button>
      </div>
    </div>
  </form>
</div>

<h3>Resultados: </h3>
<div class="form-group row">
  <label for="weight" class="col-sm-2 col-form-label">MERCADOLIBRE</label>
  <div class="col-sm-3">
    <input type="text" class="form-control">
  </div>
</div

<br>
<br>

<table class="table table-hover table-bordered table-condensed table-responsive">
  <thead>
    <tr>
      <th>Key</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <% @amazon.attributes.each do |k,v| %>
      <% next if k == 'created_at' || k == 'updated_at' || k == 'id' %>
      <tr>
        <td><%= k %></td>
        <form class="amazon-form">
          <td><input name="<%= k %>"value="<%= v %>"></td>
        </form>
      </tr>
    <%end%>
  </tbody>

</table>
<input class="btn btn-primary" id="send-form" type="button" value="Guardar">

<script>
$(function(){
  $('#calculate-price-btn').click(function(ev){
      var data = $('.calculate-form').serialize();
      $.ajax({
          url: "/amazon/calculate_price",
          type: "post",
          data : data
      }).done(function (data) {
          // Bei Erfolg
      }).fail(function() {
          // Bei Fehler
      }).always(function() {
          // Immer
      });
       ev.preventDefault();
    });

  $("#send-form").click(function() {
    var data = $('.amazon-form').serialize();
    $.ajax({
        url: "/amazon/update",
        type: "post",
        data : data
    }).done(function (data) {
        // Bei Erfolg
    }).fail(function() {
        // Bei Fehler
    }).always(function() {
        // Immer
    });
  });
});
</script>
